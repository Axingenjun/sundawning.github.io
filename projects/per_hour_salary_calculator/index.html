<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0,minimum-scale=1,maximum-scale=1">
    <title>时薪计算器</title>
    <link rel="shortcut icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAACQBAMAAAAVaP+LAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAhUExUReHY5f///y8qMS0oL/Hu8khCSdHL02ZgZ4R9hKGaobqzux+9hjkAAASdSURBVGje7ZrPa9xGFMefQW0Tn9Yg3NrHGYzXVw3CuS4IJ+5xl7aOT7q0TXwqMWmcnoxNkm1PJtA46WkpmLr9K7vSajS/3ozmSb6Ues7io/f9zpufb2Djjhrcg+5B/1dQOrkDUFGsf/p49iEpiiGg4uTvd6+mjIud30qADpgflD5/OWVCCMYYz3+Buk16gA6upyJjTeP567ImFWTQ1294i6lIWUNKJjTQwxeCGa2ThILSZ1OLU5EanzxGYaDRX9OMOY3nbxtSEQlKrznCWZJ2ywAJAT3BOYy14jB1LmjzhYfDWL6QpAhQeuPlMP5UgpJu0APO/C2/8oqDeGFVSOPSR4J4YbXfb33iwO6xIEdLATskIAirQ/oZ8J4DijAzpMQPOuSssymXwA/qDmgZ0l4LWvOBNmcsoqn0TnygL7IYEFd2T3BQesGiQEpbgoO2eBSI7ZdYSECzum7nYVCc1ZW2Y0ybAj2ODQjXBkSr65y8QkICqtWVtm/BzW4gW71sY3C1SdBoFs/RTUps0BaBo40SpQ1Iw0O2K1ebBL2ncPhP4EwBDSg9JYG0bktM0DYngY69oMcki5iaAFqTgJ5FZiKZoPSSxNETSboNtJEvE6l0TFqBvmJE0MID+oxmEcsWjklAT8cAiJaONmhNgaheGx41Jq1A/I5A24z17/5mJoE+ve8HEXvfyOym28A/ZLkQGRc4CHAQmo8i++ZsPn/JKaDvEZDY+fWHpYCTN3wYiO9+WH21fpGF56MmI2vQn5mXA/BwFpwhDZC7Wudqpwi/Z4G9lgm69B86qpB4aDmSqV2DToND4PPTcBop0Og07MH7zLv5M0HO4M/N0H/Mghb5QfYfH4T/sxpsKMj6o+32GCIjMqyucnIW/I8/IkuZ3W32fxRo1PXHy0CX6tKsuT+zvQRjCDlWawl5GUo3q/+NpA+C7M633Hbj1UAXYYsAbtqJUrgBaSDDA+SXsC7PuuK7RQhkTGx56X4Kz2ZZffVzhHC0acSYs/cBa7dTIcTOGcbRQMYq8ggFwfP52fyPEsKgLyNAgTbBF8ghIOP8MARk7EYGgWaDQGoTMborkLGMkEGJZzM6poLWPNvjvV5eN6AtNgDkO0KMe1kkDzXajLQ7BKQfs/Kyj0XIwW8YSDuKZos+yrDD8fkQkJaS/LyPMuQCQT+L9wBtBZbkGGUtSEvJ8SDQhtrf7Zc9lCnQk+AK2RmQAqkdKbZmE0BqueV7PZRpoO0Z3ST0+jBt7c7OaZOjfTPaXtPHZxJ+V6vsfkRXZlxDtzu8/IpqtediPDYBOq/q+ZhqtQVqr1nzBVWZVc6QGRClLVDO2DiULo1LYkB2yUe6pFU/ohxyQLLmoxVkooS5ZTFZXlNlwihhLiiVh/P9cMcVnRW/VtwxRRhWzJTiQuMEKR+7oPRmReJH8QbhddrNC9GRApEF343DVUWc7y5iDfIVxZsavXhaxsbjK9MfXNfHKlmaj+D46v3pbVWo5wiJ+HCgehGxlOeQvA8QAo8rDq65ENaZMen13CO9rZ9pHMlLsiQp+j5AGZ38M3/36nVZVG0y8ElMxbh/NnQP+s+B/gW3UDTN+m1LRgAAAABJRU5ErkJggg=="/>
    <style type="text/css">
      #app {
        display: flex;
        align-items: center;
        flex-direction: column;
        justify-content: center;
      }
      #logo {
        width: 120px;
        height: 120px;
        display: flex;
        align-items: center;
      }
      #logo a {
        height: fit-content;
      }
      #logo img {
        width: 100%;
      }
    </style>
  </head>
  <body>
    <div id="app">
      <h2 id="title"></h2>
      <form name="current" style="text-align:right;line-height:32px;max-width:320px;margin:0 auto;">
        <div><input type="radio" name="n" value="x"/>时薪(元/小时)：<input type="number" name="x"/></div>
        <div><input type="radio" name="n" value="y" checked="true"/>每月总工资(元)：<input type="number" name="y"/></div>
        <div><strong>法定工作日</strong><strong>法定八小时</strong>之内的工作时长(小时)：<input type="number" name="a"/></div>
        <div><strong>法定工作日</strong>八小时之外加班的至少<strong>1.5</strong>倍时薪的工作时长(小时)：<input type="number" name="b"/></div>
        <div>是否是大小周：<input type="checkbox" name="m"/></div>
        <div><strong>法定休息日</strong>周六加班的至少<strong>2</strong>倍时薪的工作时长(小时)：<input type="number" name="c"/></div>
        <div><strong>法定休息日</strong>周日加班的至少<strong>2</strong>倍时薪的工作时长(小时)：<input type="number" name="d"/></div>
        <div><strong>法定节假日</strong>加班的至少<strong>3</strong>倍时薪的工作时长(小时)：<input type="number" name="e"/></div>
      </form>
      <div id="logo">
        <a href="../../index.html">
          <script type="text/javascript" src="../../projects/random-bing-image/index.js"></script><script type="text/javascript">new RandomBingImage().randomBingImageAfterDOMElement(document.currentScript);</script>
        </a>
      </div>
    </div>
    <script type="text/javascript">
      let VERSION="0.0.3";
      document.title=`${document.title}-v${VERSION}`;
      /**
       * 计算每月工作时长
       */
      function computeHours(a,b,c,d,e,m){
        return (a*21.75+b*1.5*21.75+c*2*(52/12)*(1-m*0.5)+d*2*(52/12)+e*3*(11/12));
      }
      /**
       * 每月总工资：法定工作天数21.75，一年共52周(52个双休)，11天法定节假日。
       * @param {0|1} m 是大小周时为1，不是大小周时为0。
       */
      function computeY(x,a,b,c,d,e,m){
        return x*computeHours(a,b,c,d,e,m);
      }
      /**
       * 时薪
       */
      function computeX(y,a,b,c,d,e,m){
        console.log(arguments);
        return y/computeHours(a,b,c,d,e,m);
      }
      /**
       * 计算表单所填数据的时薪
       */
      function computeFormX(form){
        let elements=form.elements;
        let y=getY(elements.y.value);
        let a=getA(elements.a.value);
        let b=getB(elements.b.value);
        let c=getC(elements.c.value);
        let d=getD(elements.d.value);
        let e=getE(elements.e.value);
        let m=getM(elements.m.checked);
        let x=computeX(y,a,b,c,d,e,m);
        return x;
      }
      /**
       * 计算表单所填数据的每月总工资
       */
      function computeFormY(form){
        let elements=form.elements;
        let x=getX(elements.x.value);
        let a=getA(elements.a.value);
        let b=getB(elements.b.value);
        let c=getC(elements.c.value);
        let d=getD(elements.d.value);
        let e=getE(elements.e.value);
        let m=getM(elements.m.checked);
        let y=computeY(x,a,b,c,d,e,m);
        return y;
      }
      /**
       * 计算表单所填数据的每月总工作时长
       */
      function computeFormHours(form){
        let elements=form.elements;
        let a=getA(elements.a.value);
        let b=getB(elements.b.value);
        let c=getC(elements.c.value);
        let d=getD(elements.d.value);
        let e=getE(elements.e.value);
        let m=getM(elements.m.checked);
        let hours=computeHours(a,b,c,d,e,m);
        return hours;
      }
      /**
       * 从输入的数值里提取出合法的时薪
       */
      function getX(value){
        let item;
        {
          if(value===""){
            item=0;
          }else{
            let float=parseFloat(value);
            if(float<0){
              item=0;
            }else{
              item=float;
            }
          }
        }
        return item;
      }
      /**
       * 从输入的数值里提取出合法的每月总工资
       */
      function getY(value){
        let item;
        {
          if(value===""){
            item=0;
          }else{
            let float=parseFloat(value);
            if(float<0){
              item=0;
            }else{
              item=float;
            }
          }
        }
        return item;
      }
      /**
       * 从输入的数值里提取出合法的
       * 法定工作日法定八小时之内的工作时长
       */
      function getA(value){
        let item;
        {
          if(value===""){
            item=8;
          }else{
            let float=parseFloat(value);
            if(float<0){
              item=8;
            }else if(float===0){
              item=8;
            }else if(float>8){
              item=8;
            }else{
              item=float;
            }
          }
        }
        return item;
      }
      /**
       * 从输入的数值里提取出合法的
       * 法定工作日八小时之外加班的至少1.5倍时薪的工作时长
       */
      function getB(value){
        let item;
        {
          if(value===""){
            item=0;
          }else{
            let float=parseFloat(value);
            if(float<0){
              item=0;
            }else if(float>(24-8)){
              item=24-8;
            }else{
              item=float;
            }
          }
        }
        return item;
      }
      /**
       * 从输入的数值里提取出合法的
       * 法定休息日周六加班的至少2倍时薪的工作时长
       */
      function getC(value){
        let item;
        {
          if(value===""){
            item=0;
          }else{
            let float=parseFloat(value);
            if(float<0){
              item=0;
            }else if(float>24){
              item=24;
            }else{
              item=float;
            }
          }
        }
        return item;
      }
      /**
       * 从输入的数值里提取出合法的
       * 法定休息日周日加班的至少2倍时薪的工作时长
       */
      function getD(value){
        let item;
        {
          if(value===""){
            item=0;
          }else{
            let float=parseFloat(value);
            if(float<0){
              item=0;
            }else if(float>24){
              item=24;
            }else{
              item=float;
            }
          }
        }
        return item;
      }
      /**
       * 从输入的数值里提取出合法的
       * 法定节假日加班的至少3倍的时薪工作时长
       */
      function getE(value){
        let item;
        {
          if(value===""){
            item=0;
          }else{
            let float=parseFloat(value);
            if(float<0){
              item=0;
            }else if(float>24){
              item=24;
            }else{
              item=float;
            }
          }
        }
        return item;
      }
      /**
       * 从多选框里提取出合法的
       * 是否是大小周
       */
      function getM(checked){
        let item;
        {
          if(checked===false){
            item=0;
          }else{
            item=1;
          }
        }
        return item;
      }
      /**
       * 更新表单内容
       */
      function renderForm(form){
        let n=form.elements.n.value;
        if(n==="y"){
          form.x.disabled=true;
          form.y.disabled=false;
          let x=document.getElementsByName("x")[0];
          x.value=computeFormX(form);
        }else if(n==="x"){
          form.x.disabled=false;
          form.y.disabled=true;
          let y=document.getElementsByName("y")[0];
          y.value=computeFormY(form);
        }
        document.querySelector("#title").innerHTML=`${getX(form.x.value)}<sub>元/小时</sub> * ${computeFormHours(form)}<sub>小时/月</sub> = ${getY(form.y.value)}<sub>元/月</sub>`;        
      }
      let form=document.getElementsByName("current")[0];
      renderForm(form);
      form.addEventListener("input",function(event){
        renderForm(form);
      });
    </script>
    <script type="text/javascript">window.$crisp=[];window.CRISP_WEBSITE_ID="fb0d2b60-2560-4229-909a-d66bec4a56a2";(function(){d=document;s=d.createElement("script");s.src="https://client.crisp.chat/l.js";s.async=1;d.getElementsByTagName("head")[0].appendChild(s);})();</script>
  </body>
</html>
