<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>绘制一个实心的蓝色矩形</title>
  </head>
  <body>
    <script type="text/javascript">
      class DrawRectangle extends HTMLElement {
        constructor() {
          super();
          this.attachShadow({ mode: "open" });
          this.render();
          console.log("已添加canvas");
          // 1. 获取<canvas>标签
          const canvas = this.shadowRoot.querySelector("canvas");
          // 2. 获取绘制二维图形的地方
          const context = canvas.getContext("2d");
          console.log("context", context);
          // 3. 绘制蓝色矩形
          // 3.1 取画笔
          context.fillStyle = "rgba(0,0,255,1.0";
          // 3.2 上色
          context.fillRect(120, 10, 150, 150);
        }
        render() {
          const template = document.createElement("template");
          template.innerHTML = `
          <canvas width="400" height="400">请使用能支持“canvas”功能的浏览</canvas>      
          `;
          this.shadowRoot.appendChild(template.content.cloneNode(true));
        }
      }
      window.customElements.define("draw-rectangle", DrawRectangle);
    </script>

    <draw-rectangle></draw-rectangle>
  </body>
</html>
