!function(n,o){"object"==typeof exports&&"undefined"!=typeof module?o(exports):"function"==typeof define&&define.amd?define(["exports"],o):o((n="undefined"!=typeof globalThis?globalThis:n||self).termux_robot_utility={})}(this,(function(n){"use strict";function o(n){let{execSync:o}=require("child_process");return o(n)}function t(){let{existsSync:n}=require("fs");!0!==n("./node_modules/")&&o("npm init -y")}function e(){switch(process.platform){case"win32":return"where";case"android":return"which";default:return""}}function i(){t();try{o(`${e()} pnpm`)}catch(n){o("npm install pnpm -g")}}function r(n){let{existsSync:t}=require("fs");!0!==t(`./node_modules/${n}`)&&(i(),console.log(`将安装模块：${n}`),o(`pnpm add ${n} --save-dev`),console.log(`已安装模块：${n}`))}function c(n){return r(n),require(n)}async function s(){return await c("ps-list")()}function a(n,o){return console.log(`启动程序：${n.program} ${n.args.join(" ")}`),c("cross-spawn").sync(n.program,n.args,o)}function l(n,o,t){let e=c("which");e(n,(function(i,r){i?(console.log(`未安装程序：${n}`),console.log(`将安装程序：${n}`),a(o),e(n,(function(o,e){o?console.log(`无法安装程序：${n}`):t&&t()}))):t&&t()}))}async function u(n){if(void 0===n)return;let o=await s();Object.keys(n).forEach((function(t){0===o.filter((function(n){return n.name===t})).length?l(t,n[t].install,(function(){a(n[t].cmd)})):console.log(`已启动程序：${t}`)}))}n.child_process_exec_sync=o,n.create_crontab_tasks=async function n(o){void 0!==o&&(await u({crond:{cmd:{program:"crond",args:[]},install:{program:"pkg",args:["install","cronie","-y"]}}}),c("crontab").load((function(t,e){if(null===e)return void n(o);let i=e.jobs().map((function(n){return n.toString()}));o.forEach((function(n){!0!==i.includes(n.join(" "))&&(e.create(n[1],n[0]),console.log("创建任务：",n[0],n[1]))})),e.save()})))},n.get_platform_which_command=e,n.get_process_list=s,n.hello=function(){console.log("欢迎")},n.install_program=l,n.install_require_module=c,n.npm_config_set_regisitry_taobao=function(){return o("npm config set registry https://registry.npm.taobao.org")},n.npm_init_y=t,n.pnpm_add_save_dev=r,n.pnpm_init_y=i,n.start_process=a,n.start_processes=u,n.termux_notification=function(n){void 0===n&&(n={});let o=[];Object.keys(n).forEach((function(t){o.push(t,n[t])})),l("termux-notification",{program:"pkg",args:["install","termux-api","-y"]},(function(){a({program:"termux-notification",args:o})}))},Object.defineProperty(n,"__esModule",{value:!0})}));
