!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).termux_robot_utility={})}(this,(function(e){"use strict";function n(e){let{exec:n}=require("child_process");return console.log("异步启动程序：",e),n(e)}function t(e){let{execSync:n}=require("child_process");return console.log("同步启动程序：",e),n(e)}function i(){let{existsSync:e}=require("fs");!0!==e("./node_modules/")&&t("npm init -y")}function o(){switch(process.platform){case"win32":return"where";case"android":return"which";default:return""}}function s(e){try{return t(`${o()} ${e}`)}catch(e){return}}function r(){i(),void 0===s("pnpm")&&t("npm install pnpm -g")}function c(e){let{existsSync:n}=require("fs");!0!==n(`./node_modules/${e}`)&&(r(),console.log(`将安装模块：${e}`),t(`pnpm add ${e} --save-dev`),console.log(`已安装模块：${e}`))}function a(e){return c(e),require(e)}async function u(){return await a("ps-list")()}async function l(e){return 0!==(await u()).filter((function(n){return n.name===e})).length}function d(e){return require("fs").existsSync(e)}e.child_process_exec=n,e.child_process_exec_sync=t,e.create_crontab_tasks=async function e(i){if(void 0===i)return;void 0===s("crond")&&t("pkg install cronie -y"),!1===await l("crond")&&n("crond"),a("crontab").load((function(n,t){if(null===t)return void e(i);let o=t.jobs().map((function(e){return e.toString()}));i.forEach((function(e){!0!==o.includes(e.join(" "))&&(t.create(e[1],e[0]),console.log("创建任务：",e[0],e[1]))})),t.save()}))},e.executable_find=s,e.get_platform_which_command=o,e.get_process_list=u,e.hello=function(){console.log("欢迎使用Node.js来管理程序")},e.install_emacs=function(){void 0===s("emacs")&&n("pkg install emacs -y"),!1===d("/data/data/com.termux/files/home/.emacs.d")&&t("mkdir ~/.emacs.d"),!1===d("/data/data/com.termux/files/home/.emacs.d/init.el")&&n("curl https://gitee.com/sundawning/sundawning.gitee.io/raw/master/projects/termux/robot/init.el -o ~/.emacs.d/init.el")},e.install_require_module=a,e.is_file_exists=d,e.is_process_live=l,e.npm_config_set_regisitry_taobao=function(){return t("npm config set registry https://registry.npm.taobao.org")},e.npm_init_y=i,e.pnpm_add_save_dev=c,e.pnpm_init_y=r,e.start_sshd=async function(){void 0===s("sshd")&&t("pkg install openssh -y"),!1===await l("sshd")&&n("sshd -p 8022")},e.termux_notification=function(e){void 0===e&&(e={});let n=[];Object.keys(e).forEach((function(t){n.push(t,e[t])})),void 0===s("termux-notification")&&t("pkg install termux-api -y"),t(`termux-notification ${n.join(" ")}`)},Object.defineProperty(e,"__esModule",{value:!0})}));
