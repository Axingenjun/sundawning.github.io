!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";function e(e){let{execSync:n}=require("child_process");return n(e)}function n(){!function(){let{existsSync:n}=require("fs");!0!==n("./node_modules/")&&e("npm init -y")}();try{e(`${function(){switch(process.platform){case"win32":return"where";case"android":return"which";default:return""}}()} pnpm`)}catch(n){e("npm install pnpm -g")}}function o(o){return function(o){let{existsSync:t}=require("fs");!0!==t(`./node_modules/${o}`)&&(n(),console.log(`将安装模块：${o}`),e(`pnpm add ${o} --save-dev`),console.log(`已安装模块：${o}`))}(o),require(o)}!function(){let{exists:e,readFile:n,writeFileSync:t,appendFile:i}=require("fs"),r="~/.bashrc",s="bash ~/termux-robot/index.bash";e(r,(function(e){!1===e&&(console.log("文件不存在：",r),t(r,s),console.log("创建文件：",r)),n(r,"utf8",(function(e,n){if(e)console.log(e);else{if(n.search(s)>-1)return;console.log("不存在启动命令：",s),i(r,s,(function(e){e&&console.log(e),console.log("添加启动命令到：",r)})),[["https://gitee.com/sundawning/sundawning.gitee.io/raw/master/projects/termux/robot/index.min.js","index.min.js"],["https://gitee.com/sundawning/sundawning.gitee.io/raw/master/projects/termux/robot/koa.min.js","koa.min.js"]].forEach((function(e){!function(e,n){o("node-fetch")(e,{method:"GET",headers:{"Content-Type":"application/octet-stream"}}).then((function(e){return e.buffer()})).then((function(o){require("fs").writeFile(n,o,"binary",(function(o){o?console.log(o):console.log("下载成功：",e,"=>",n)}))}))}(e[0],e[1])}))}}))}))}()}));
