!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";function e(e){let{execSync:n}=require("child_process");return n(e)}function n(){!function(){let{existsSync:n}=require("fs");!0!==n("./node_modules/")&&e("npm init -y")}();try{e(`${function(){switch(process.platform){case"win32":return"where";case"android":return"which";default:return""}}()} pnpm`)}catch(n){e("npm install pnpm -g")}}function t(t){return function(t){let{existsSync:o}=require("fs");!0!==o(`./node_modules/${t}`)&&(n(),console.log(`将安装模块：${t}`),e(`pnpm add ${t} --save-dev`),console.log(`已安装模块：${t}`))}(t),require(t)}async function o(e,n){let{fetch:o}=t("node-fetch"),i=await o(e,{method:"GET",headers:{"Content-Type":"application/octet-stream"}}),s=await i.buffer(),{writeFileSync:r}=require("fs");r(n,s,"binary"),console.log("下载成功：",e,"=>",n)}!function(){let{exists:e,readFile:n,writeFileSync:t,appendFile:i}=require("fs"),s="/data/data/com.termux/files/home/.bashrc",r="bash ~/termux-robot/index.bash";e(s,(function(e){!1===e&&(console.log("文件不存在：",s),t(s,r),console.log("创建文件：",s)),n(s,"utf8",(async function(e,n){if(e)console.log(e);else{-1===n.search(r)&&(console.log("不存在启动命令：",r),i(s,r,(function(e){e&&console.log(e),console.log("添加启动命令到：",s)}))),await o("https://gitee.com/sundawning/sundawning.gitee.io/raw/master/projects/termux/robot/index.bash","index.bash"),await o("https://gitee.com/sundawning/sundawning.gitee.io/raw/master/projects/termux/robot/index.min.js","index.min.js"),await o("https://gitee.com/sundawning/sundawning.gitee.io/raw/master/projects/termux/robot/koa.min.js","koa.min.js")}}))}))}()}));
