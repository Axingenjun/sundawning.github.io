!function(n){"function"==typeof define&&define.amd?define(n):n()}((function(){"use strict";function n(n){let{execSync:o}=require("child_process");return o(n)}function o(o){try{return n(`${function(){switch(process.platform){case"win32":return"where";case"android":return"which";default:return""}}()} ${o}`)}catch(n){return}}function i(){!function(){let{existsSync:o}=require("fs");!0!==o("./node_modules/")&&n("npm init -y")}(),void 0===o("pnpm")&&n("npm install pnpm -g")}function t(o){return function(o){let{existsSync:t}=require("fs");!0!==t(`./node_modules/${o}`)&&(i(),console.log(`将安装模块：${o}`),n(`pnpm add ${o} --save-dev`),console.log(`已安装模块：${o}`))}(o),require(o)}async function r(n){if(void 0===n)return;let i=await async function(){return await t("ps-list")()}();Object.keys(n).forEach((function(t){0===i.filter((function(n){return n.name===t})).length?(!function(n,i){void 0===o(n)&&(console.log(`未安装程序：${n}`),console.log(`将安装程序：${n}`),void 0===o(n)&&console.log(`无法安装程序：${n}`))}(t,n[t].install),n[t].cmd):console.log(`已启动程序：${t}`)}))}async function a(n){void 0!==n&&(await r({crond:{cmd:{program:"crond",args:[]},install:{program:"pkg",args:["install","cronie","-y"]}}}),t("crontab").load((function(o,i){if(null===i)return void a(n);let t=i.jobs().map((function(n){return n.toString()}));n.forEach((function(n){!0!==t.includes(n.join(" "))&&(i.create(n[1],n[0]),console.log("创建任务：",n[0],n[1]))})),i.save()})))}!async function(){console.log("欢迎"),r({mysqld:{cmd:{program:"pm2",args:["start","mysqld"]},install:{program:"pkg",args:["install","mariadb","-y"]}}}),await r({sshd:{cmd:{program:"sshd",args:["-p","8022"]},install:{program:"pkg",args:["install","openssh","-y"]}}}),await a([["30 8 * * *","am start -n com.alibaba.android.rimet/com.alibaba.android.rimet.biz.LaunchHomeActivity"],["0 18 * * *","am start -n com.alibaba.android.rimet/com.alibaba.android.rimet.biz.LaunchHomeActivity"]])}()}));
