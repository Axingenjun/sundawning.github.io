!function(n){"function"==typeof define&&define.amd?define(n):n()}((function(){"use strict";function n(n){!0!==function(n){let{existsSync:o}=require("fs"),{execSync:a}=require("child_process");if(!1===o("./node_modules/")){console.log("不存在：","./node_modules/");try{console.log("尝试：","pnpm init -y"),a("pnpm init -y")}catch(n){console.log("尝试：","npm install pnpm -g"),a("npm install pnpm -g")}}return!1===o("./node_modules/cross-spawn")&&a("pnpm add cross-spawn --save-dev"),o(`./node_modules/${n}`)}(n)&&(console.log(`将安装模块：${n}`),require("cross-spawn").sync("pnpm",["add",n,"--save-dev"]),console.log(`已安装模块：${n}`))}function o(o){return n(o),require(o)}function a(n,a,r){o("which")(n,(function(o,i){o&&(console.log(`未安装程序：${n}`),console.log(`将安装程序：${n}`),function(n,o){console.log(`启动程序：${n.program}`),require("cross-spawn").sync(n.program,n.args,o)}(a)),r&&r()}))}async function r(n){if(void 0===n)return;let r=await async function(){return await o("ps-list")()}();Object.keys(n).forEach((function(o){0===r.filter((function(n){return n.name===o})).length?a(o,n[o].install,(function(){var a,r;a=n[o].cmd,console.log(`启动程序：${a.program}`),require("cross-spawn")(a.program,a.args,r)})):console.log(`已启动程序：${o}`)}))}async function i(n){void 0!==n&&(await r({crond:{cmd:{program:"crond",args:[]},install:{program:"pkg",args:["install","cronie","-y"]}}}),o("crontab").load((function(o,a){if(null===a)return void i(n);let r=a.jobs().map((function(n){return n.toString()}));n.forEach((function(n){!0!==r.includes(n.join(" "))&&(a.create(n[1],n[0]),console.log("创建任务：",n[0],n[1]))})),a.save()})))}!async function(){console.log("欢迎"),a("pm2",{program:"pnpm",args:["add","pm2","-g"]},(function(){r({mysqld:{cmd:{program:"pm2",args:["start","mysqld"]},install:{program:"pkg",args:["install","mariadb","-y"]}}})})),await r({sshd:{cmd:{program:"sshd",args:["-p","8022"]},install:{program:"pkg",args:["install","openssh","-y"]}}}),await i([["30 8 * * *","am start -n com.alibaba.android.rimet/com.alibaba.android.rimet.biz.LaunchHomeActivity"],["0 18 * * *","am start -n com.alibaba.android.rimet/com.alibaba.android.rimet.biz.LaunchHomeActivity"]])}()}));
