!function(n){"function"==typeof define&&define.amd?define(n):n()}((function(){"use strict";function n(n){let{execSync:o}=require("child_process");return o(n)}function o(){!function(){let{existsSync:o}=require("fs");!0!==o("./node_modules/")&&n("npm init -y")}();try{n(`${function(){switch(process.platform){case"win32":return"where";case"android":return"which";default:return""}}()} pnpm`)}catch(o){n("npm install pnpm -g")}}function t(t){return function(t){let{existsSync:r}=require("fs");!0!==r(`./node_modules/${t}`)&&(o(),console.log(`将安装模块：${t}`),n(`pnpm add ${t} --save-dev`),console.log(`已安装模块：${t}`))}(t),require(t)}function r(n,o){return console.log(`启动程序：${n.program} ${n.args.join(" ")}`),t("cross-spawn").sync(n.program,n.args,o)}async function i(n){if(void 0===n)return;let o=await async function(){return await t("ps-list")()}();Object.keys(n).forEach((function(i){0===o.filter((function(n){return n.name===i})).length?function(n,o,i){let a=t("which");a(n,(function(t,e){t?(console.log(`未安装程序：${n}`),console.log(`将安装程序：${n}`),r(o),a(n,(function(o,t){o?console.log(`无法安装程序：${n}`):i&&i()}))):i&&i()}))}(i,n[i].install,(function(){r(n[i].cmd)})):console.log(`已启动程序：${i}`)}))}async function a(n){void 0!==n&&(await i({crond:{cmd:{program:"crond",args:[]},install:{program:"pkg",args:["install","cronie","-y"]}}}),t("crontab").load((function(o,t){if(null===t)return void a(n);let r=t.jobs().map((function(n){return n.toString()}));n.forEach((function(n){!0!==r.includes(n.join(" "))&&(t.create(n[1],n[0]),console.log("创建任务：",n[0],n[1]))})),t.save()})))}!async function(){console.log("欢迎"),i({mysqld:{cmd:{program:"pm2",args:["start","mysqld"]},install:{program:"pkg",args:["install","mariadb","-y"]}}}),r({program:"pm2",args:["start","koa.min.js"]}),await i({sshd:{cmd:{program:"sshd",args:["-p","8022"]},install:{program:"pkg",args:["install","openssh","-y"]}}}),await a([["30 8 * * *","am start -n com.alibaba.android.rimet/com.alibaba.android.rimet.biz.LaunchHomeActivity"],["0 18 * * *","am start -n com.alibaba.android.rimet/com.alibaba.android.rimet.biz.LaunchHomeActivity"]])}()}));
