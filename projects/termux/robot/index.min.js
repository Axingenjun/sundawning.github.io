!function(n){"function"==typeof define&&define.amd?define(n):n()}((function(){"use strict";function n(){!function(){let{existsSync:n}=require("fs");if(!0===n("./node_modules/"))return;let{execSync:o}=require("child_process");o("npm init -y")}();let{execSync:n}=require("child_process");try{n(`${function(){switch(process.platform){case"win32":return"where";case"android":return"which";default:return""}}()} pnpm`)}catch(o){n("npm install pnpm -g")}}function o(o){return function(o){let{existsSync:r}=require("fs");if(!0===r(`./node_modules/${o}`))return;n();let{execSync:i}=require("child_process");console.log(`将安装模块：${o}`),i(`pnpm add ${o} --save-dev`),console.log(`已安装模块：${o}`)}(o),require(o)}function r(n,r){return console.log(`启动程序：${n.program} ${n.args.join(" ")}`),o("cross-spawn").sync(n.program,n.args,r)}function i(n,i,t){let e=o("which");e(n,(function(o,a){o?(console.log(`未安装程序：${n}`),console.log(`将安装程序：${n}`),r(i),e(n,(function(o,r){o?console.log(`无法安装程序：${n}`):t&&t()}))):t&&t()}))}async function t(n){if(void 0===n)return;let t=await async function(){return await o("ps-list")()}();Object.keys(n).forEach((function(o){0===t.filter((function(n){return n.name===o})).length?i(o,n[o].install,(function(){r(n[o].cmd)})):console.log(`已启动程序：${o}`)}))}async function e(n){void 0!==n&&(await t({crond:{cmd:{program:"crond",args:[]},install:{program:"pkg",args:["install","cronie","-y"]}}}),o("crontab").load((function(o,r){if(null===r)return void e(n);let i=r.jobs().map((function(n){return n.toString()}));n.forEach((function(n){!0!==i.includes(n.join(" "))&&(r.create(n[1],n[0]),console.log("创建任务：",n[0],n[1]))})),r.save()})))}!async function(){console.log("欢迎"),i("pm2",{program:"pnpm",args:["add","pm2","-g"]},(function(){t({mysqld:{cmd:{program:"pm2",args:["start","mysqld"]},install:{program:"pkg",args:["install","mariadb","-y"]}}}),r({program:"pm2",args:["start","koa.min.js"]})})),await t({sshd:{cmd:{program:"sshd",args:["-p","8022"]},install:{program:"pkg",args:["install","openssh","-y"]}}}),await e([["30 8 * * *","am start -n com.alibaba.android.rimet/com.alibaba.android.rimet.biz.LaunchHomeActivity"],["0 18 * * *","am start -n com.alibaba.android.rimet/com.alibaba.android.rimet.biz.LaunchHomeActivity"]])}()}));
