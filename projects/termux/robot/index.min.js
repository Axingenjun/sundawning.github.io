!function(n){"function"==typeof define&&define.amd?define(n):n()}((function(){"use strict";function n(){!function(){let{existsSync:n}=require("fs");if(!0===n("./node_modules/"))return;let{execSync:r}=require("child_process");r("npm init -y")}();let{execSync:n}=require("child_process");try{n(`${function(){switch(process.platform){case"win32":return"where";case"android":return"which";default:return""}}()} pnpm`)}catch(r){n("npm install pnpm -g")}}function r(r){return function(r){let{existsSync:o}=require("fs");if(!0===o(`./node_modules/${r}`))return;n();let{execSync:i}=require("child_process");console.log(`将安装模块：${r}`),i(`pnpm add ${r} --save-dev`),console.log(`已安装模块：${r}`)}(r),require(r)}function o(n,r){return console.log(`启动程序：${n.program} ${n.args.join(" ")}`),require("cross-spawn").sync(n.program,n.args,r)}function i(n,i,e){let t=r("which");t(n,(function(r,a){r?(console.log(`未安装程序：${n}`),console.log(`将安装程序：${n}`),o(i),t(n,(function(r,o){r?console.log(`无法安装程序：${n}`):e&&e()}))):e&&e()}))}async function e(n){if(void 0===n)return;let e=await async function(){return await r("ps-list")()}();Object.keys(n).forEach((function(r){0===e.filter((function(n){return n.name===r})).length?i(r,n[r].install,(function(){o(n[r].cmd)})):console.log(`已启动程序：${r}`)}))}async function t(n){void 0!==n&&(await e({crond:{cmd:{program:"crond",args:[]},install:{program:"pkg",args:["install","cronie","-y"]}}}),r("crontab").load((function(r,o){if(null===o)return void t(n);let i=o.jobs().map((function(n){return n.toString()}));n.forEach((function(n){!0!==i.includes(n.join(" "))&&(o.create(n[1],n[0]),console.log("创建任务：",n[0],n[1]))})),o.save()})))}!async function(){console.log("欢迎"),i("pm2",{program:"pnpm",args:["add","pm2","-g"]},(function(){e({mysqld:{cmd:{program:"pm2",args:["start","mysqld"]},install:{program:"pkg",args:["install","mariadb","-y"]}}}),o({program:"pm2",args:["start","koa.min.js"]})})),await e({sshd:{cmd:{program:"sshd",args:["-p","8022"]},install:{program:"pkg",args:["install","openssh","-y"]}}}),await t([["30 8 * * *","am start -n com.alibaba.android.rimet/com.alibaba.android.rimet.biz.LaunchHomeActivity"],["0 18 * * *","am start -n com.alibaba.android.rimet/com.alibaba.android.rimet.biz.LaunchHomeActivity"]])}()}));
