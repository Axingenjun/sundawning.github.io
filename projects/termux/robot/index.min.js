!function(n){"function"==typeof define&&define.amd?define(n):n()}((function(){"use strict";function n(){let{execSync:n}=require("child_process");try{console.log("尝试：","pnpm init -y");n("pnpm init -y")}catch(o){console.log("尝试：","npm install pnpm -g"),n("npm install pnpm -g"),n("pnpm init -y")}}function o(o){!0!==function(o){let{existsSync:e}=require("fs");if(!1===e("./node_modules/")&&(console.log("不存在：","./node_modules/"),n()),!1===e("./node_modules/cross-spawn")){let{execSync:o}=require("child_process");try{console.log("尝试：","pnpm add cross-spawn --save-dev"),o("pnpm add cross-spawn --save-dev")}catch(e){n(),o("pnpm add cross-spawn --save-dev")}}return e(`./node_modules/${o}`)}(o)&&function(o){let{existsSync:e}=require("fs");!1===e("./node_modules/")&&(console.log("不存在：","./node_modules/"),n());let{execSync:a}=require("child_process");console.log(`将安装模块：${o}`);try{a(`pnpm add ${o} --save-dev`)}catch(e){n(),a(`pnpm add ${o} --save-dev`)}console.log(`已安装模块：${o}`)}(o)}function e(n){return o(n),require(n)}function a(n,o){return console.log(`启动程序：${n.program}`),require("cross-spawn").sync(n.program,n.args,o)}function s(n,o,s){e("which")(n,(function(e,r){e&&(console.log(`未安装程序：${n}`),console.log(`将安装程序：${n}`),a(o)),s&&s()}))}async function r(n){if(void 0===n)return;let o=await async function(){return await e("ps-list")()}();Object.keys(n).forEach((function(e){0===o.filter((function(n){return n.name===e})).length?s(e,n[e].install,(function(){a(n[e].cmd)})):console.log(`已启动程序：${e}`)}))}async function i(n){void 0!==n&&(await r({crond:{cmd:{program:"crond",args:[]},install:{program:"pkg",args:["install","cronie","-y"]}}}),e("crontab").load((function(o,e){if(null===e)return void i(n);let a=e.jobs().map((function(n){return n.toString()}));n.forEach((function(n){!0!==a.includes(n.join(" "))&&(e.create(n[1],n[0]),console.log("创建任务：",n[0],n[1]))})),e.save()})))}!async function(){console.log("欢迎"),s("pm2",{program:"pnpm",args:["add","pm2","-g"]},(function(){r({mysqld:{cmd:{program:"pm2",args:["start","mysqld"]},install:{program:"pkg",args:["install","mariadb","-y"]}}}),a({program:"pm2",args:["start","koa.min.js"]})})),await r({sshd:{cmd:{program:"sshd",args:["-p","8022"]},install:{program:"pkg",args:["install","openssh","-y"]}}}),await i([["30 8 * * *","am start -n com.alibaba.android.rimet/com.alibaba.android.rimet.biz.LaunchHomeActivity"],["0 18 * * *","am start -n com.alibaba.android.rimet/com.alibaba.android.rimet.biz.LaunchHomeActivity"]])}()}));
